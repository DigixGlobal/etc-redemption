'use strict';

var utils = require('../utils');

module.exports = function version(self) {
  return function (opts, callback) {
    if (typeof opts === 'function') {
      callback = opts;
      opts = {};
    }

    utils.ifRepoExists(self._repo, function (err) {
      if (err) {
        return callback(err);
      }

      self._repo.config.get(function (err, config) {
        if (err) {
          return callback(err);
        }

        callback(null, config.Version.Current);
      });
    });
  };
};